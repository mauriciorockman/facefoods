var app=angular.module("webviewApp",["ui.router","ngAnimate","templates","ui.bootstrap","toaster"]);app.controller("indexCtrl",["$scope","$rootScope","$http","$timeout","toaster",function($scope,$rootScope,$http,$timeout,toaster){$timeout(function(){$scope.loaded=!0},1e3),$scope.doTheBack=function(){window.history.back()},$scope.pop=function(qty){1==qty?toaster.pop({type:"info",title:"Você já selecionou "+qty+" sabor",body:"Caso queira alterar, desmarque alguma opção",timeout:3e3}):toaster.pop({type:"info",title:"Você já selecionou "+qty+" sabores",body:"Caso queira alterar, desmarque alguma opção",timeout:3e3})},$scope.pedido={user:{}},$scope.nsabores=["1"],$scope.currentPizza="",$scope.num_pizza_add=0,$scope.curr_pizza_index=null,$scope.selected=!1,$scope.issetBorda=!1,$scope.nSaboresLimit=1,$scope.issetMassa=!1,$scope.issetNSabores=!1,$scope.nSaboresSelec=0,$scope.addPizza=function(pizza){for($scope.currentPizza=pizza.titulo,$scope.nsabores=[],$scope.num_pizza_add++,$scope.curr_pizza_index=$scope.num_pizza_add-1,i=0;i<pizza.nsabores;i++)$scope.nsabores.push(i+1);$scope.pedido.pizzas[$scope.curr_pizza_index]={nome:pizza.titulo,preco:pizza.preco,id:pizza.id,sabores:[]},console.log("pizza selecionada: "+$scope.currentPizza),console.log("Pizza adicionada ao carrinho: "+$scope.pedido.pizzas[$scope.curr_pizza_index].nome+", Preço: "+$scope.pedido.pizzas[$scope.curr_pizza_index].preco),console.log($scope.pedido)},$scope.setBorda=function(borda){$scope.issetBorda=!0,$scope.pedido.pizzas[$scope.curr_pizza_index].borda={nome:borda.nome,preco:borda.preco,id:borda.id},console.log($scope.pedido.pizzas[$scope.curr_pizza_index].borda.nome+" adicionada para a "+$scope.pedido.pizzas[$scope.curr_pizza_index].nome),console.log($scope.pedido)},$scope.setMassa=function(massa){$scope.issetMassa=!0,$scope.pedido.pizzas[$scope.curr_pizza_index].massa={nome:massa.nome,preco:massa.preco,id:massa.id},console.log($scope.pedido.pizzas[$scope.curr_pizza_index].massa.nome+" adicionada para a "+$scope.pedido.pizzas[$scope.curr_pizza_index].nome),console.log($scope.pedido)},$scope.addSabor=function(sabor){sabor.selected||$scope.nSaboresSelec!=$scope.nSaboresLimit?($scope.pedido.pizzas[$scope.curr_pizza_index].sabores.push({nome:sabor.sabor,preco:sabor.preco,id:sabor.id}),console.log($scope.pedido)):$scope.pop($scope.nSaboresSelec)},$scope.setNSabores=function(qty){$scope.nSaboresLimit=qty,$scope.issetNSabores=!0,$scope.salgado_doce="salgado",$scope.limparSabores(),$scope.nSaboresSelec=0,console.log(qty),$scope.pedido.pizzas[$scope.curr_pizza_index].sabores=[]},$scope.addSaborPizza=function(x){x?$scope.nSaboresSelec++:$scope.nSaboresSelec--,console.log($scope.nSaboresSelec)},$scope.check_cep=function(cep){8==cep.length?(console.log("Formato correto"),$http({method:"GET",url:"https://viacep.com.br/ws/"+cep+"/json/"}).then(function(response){$scope.user_rua=response.data.logradouro,$scope.cep_msg=""})):$scope.cep_msg="Formato incorreto de CEP! Exemplo de CEP: 89224471"},$scope.limparSabores=function(){$rootScope.$emit("limparSabores",{})},$scope.pedido={user:{name:"Maurício Montiel"},pizzas:[{nome:"Pizza Gigante",preco:"25",id:"1",borda:{nome:"Borda de Catupiry",preco:"",id:""},massa:{nome:"Massa média",preco:"",id:""},sabores:[{nome:"Frango com Catupiry",preco:"",id:"1"},{nome:"Calabresa",preco:"",id:""},{nome:"Chocolate",preco:"2",id:""}]}]},console.log($scope.pedido)}]),app.config(function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/Menu"),$stateProvider.state("Menu",{url:"/Menu",templateUrl:"Menu/Menu.html",controller:"MenuCtrl"}).state("pizzaoptions",{url:"/pizzaoptions",templateUrl:"pizzaExtra/pizzaoptions.html",controller:"MenuCtrl"}).state("pizza-sabores",{url:"/pizza-sabores",templateUrl:"pizza-sabores/sabores.html",controller:"MenuCtrl"}).state("entrega",{url:"/entrega",templateUrl:"entrega/entrega.html",controller:"MenuCtrl"}).state("pagamento",{url:"/pagamento",templateUrl:"pagamento/pagamento.html",controller:"MenuCtrl"}).state("resumoPedido",{url:"/resumoPedido",templateUrl:"resumoPedido/resumoPedido.html",controller:"MenuCtrl"})}),angular.module("templates",[]),app.run(function($rootScope){$rootScope.pizzaData={combos:[{imagem:"img1.jpg",titulo:"PIZZA GRANDE SALGADA + PIZZA DOCE PEQUENA + REFRIGERANTE 2L",descricao:"Descrição dessa promoção",preco:"65"},{imagem:"img1.jpg",titulo:"PIZZA GIGANTE SALGADA + PIZZA DOCE PEQUENA + REFRIGERANTE 2L",descricao:"Descrição dessa promoção",preco:"75"}],pizzas:[{tamanhos:[{titulo:"Pizza Broto",descricao:"15 cm e 1 sabor",preco:"20",nsabores:"1",id:"1"},{titulo:"Pizza Pequena",descricao:"15 cm e 1 sabor",preco:"20",nsabores:"1",id:"2"},{titulo:"Pizza Média",descricao:"15 cm e 1 sabor",preco:"20",nsabores:"2",id:"3"},{titulo:"Pizza Grande",descricao:"15 cm e 1 sabor",preco:"20",nsabores:"3",id:"4"},{titulo:"Pizza Gigante",descricao:"15 cm e 1 sabor",preco:"20",nsabores:"4",id:"6"}]},{opcoes:[{bordas:[{nome:"Borda de Catupiry",preco:"5",id:"1","descrição":""},{nome:"Borda de Cheddar",preco:"5",id:"2","descrição":""},{nome:"Sem Borda",preco:"",id:"3","descrição":""}]},{massas:[{nome:"Massa Fina",preco:"","descrição":"",id:"1"},{nome:"Massa Média",preco:"","descrição":"",id:"2"},{nome:"Massa Grossa",preco:"1","descrição":"",id:"3"}]}]},{sabores_salgados:[{sabor:"ALHO E ÓLEO",descricao:"feita com alho frito e molho de alho",preco:"",id:"1",selected:!1},{sabor:"AIPIM COM BACON",descricao:"molho, purê de aipim e bacon",preco:"",id:"2",selected:!1},{sabor:"BACON",descricao:"molho, mussarela e bacon",preco:"",id:"3",selected:!1},{sabor:"BAIANA",descricao:"molho, mussarela, calabresa, molho de pimenta, ovos e cebola",preco:"",id:"4",selected:!1},{sabor:"BOLONHESA",descricao:"coxão mole moído sem nenhuma gordura, milho e parmesão.",preco:"",id:"5",selected:!1},{sabor:"BRASILEIRA",descricao:"frango, presunto, tomate e queijo minas",preco:"",id:"6",selected:!1},{sabor:"BRÓCOLIS",descricao:"com bacon ou alho",preco:"",id:"7",selected:!1},{sabor:"CALABRESA",descricao:"calabresa fatiada com ou sem cebola",preco:"",id:"8",selected:!1},{sabor:"CATUPERU",descricao:"peito de peru fatiado com catupiry®",preco:"",id:"9",selected:!1},{sabor:"CHAMPIGNON",descricao:"champignons de primeira fatiados.",preco:"",id:"10",selected:!1},{sabor:"ALEMÃ",descricao:"lombo alemão com champignon",preco:"3",id:"11",selected:!1},{sabor:"AMALFITANA",descricao:"salada de alcachofra e mussarela de búfala",preco:"2",id:"12",selected:!1},{sabor:"ARGENTINA",descricao:"mignon, palmito e chimichurri",preco:"2",id:"13",selected:!1},{sabor:"GREGA",descricao:"mussarela de búfala, tomates secos, queijo minas, azeitonas Azapa, gorgonzola, um toque de manjericão e Catupiry.",preco:"4",id:"14",selected:!1}]},{sabores_doces:[{sabor:"AMAZÔNIA",descricao:"açaí com leite condensado.",preco:"",id:"50",selected:!1},{sabor:"BANANA AO RUN",descricao:"banana, chocolate preto ou branco e licor de run.",preco:"3",id:"51",selected:!1},{sabor:"BANANA COM CANELA",descricao:"banana e canela.",preco:"4",id:"52",selected:!1},{sabor:"BANANA COM CHOCOLATE",descricao:"banana, chocolate preto ou branco.",preco:"",id:"53",selected:!1},{sabor:"BANANA NEVADA",descricao:"banana caramelada e claras em neve.",preco:"",id:"54",selected:!1}]}],bebidas:[{titulo:"Coca Cola 2L",descricao:"",preco:"10"},{titulo:"Kuat 2L",descricao:"",preco:"8"}]}}),app.controller("MenuCtrl",["$scope","$rootScope","toaster",function($scope,$rootScope,toaster){$scope.pop=function(){toaster.pop("info","title","text")},$scope.combos=$rootScope.pizzaData.combos,$scope.pizzas=$rootScope.pizzaData.pizzas[0].tamanhos,$scope.sabores_salgados=$rootScope.pizzaData.pizzas[2].sabores_salgados,$scope.sabores_doces=$rootScope.pizzaData.pizzas[3].sabores_doces,$scope.bebidas=$rootScope.pizzaData.bebidas,$scope.bordas=$rootScope.pizzaData.pizzas[1].opcoes[0].bordas,$scope.massas=$rootScope.pizzaData.pizzas[1].opcoes[1].massas,$rootScope.$on("limparSabores",function(){$scope.limparSabores()}),$scope.limparSabores=function(){for(i=0;i<$scope.sabores_salgados.length;i++)$scope.sabores_salgados[i].selected=!1;for(i=0;i<$scope.sabores_doces.length;i++)$scope.sabores_doces[i].selected=!1;console.log("limparSabores() foi chamada!")}}]),angular.module("templates").run(["$templateCache",function($templateCache){$templateCache.put("entrega/entrega.html",'<section>  <div class="fixed-button-top"><div class="row align-vertical"><div class="col-2"><a ng-click="doTheBack()"><i class="fa fa-arrow-left"></i></a></div><div class="col-10 text-left">Pizza Gigante</div></div></div><div class="space-top"></div><h3 class="titulo">Entrega ou Retirada?</h3><row class="text-center"><div class="col">   <input class="hidden radio-label rb" type="radio" name="entrega" id="ent_1" value="entrega" ng-model="entrega" checked="checked"/><label class="button-label" for="ent_1"><h1>ENTREGA</h1></label></div><div class="col">   <input class="hidden radio-label rb" type="radio" name="entrega" id="ent_2" value="balcao" ng-model="entrega"/><label class="button-label" for="ent_2"><h1>RETIRADA NO BALCÃO</h1></label></div></row><div id="entrega-dados" ng-show="entrega == \'entrega\'"><h5 class="titulo">Dados Para Entrega</h5><div class="container"><div class="row"><div class="col"><h5>Nome</h5><input type="text" ng-model="user_nome"/></div></div><div class="row"><div class="col"><h5>CEP </h5><input type="text" ng-model="user_cep" ng-blur="check_cep(user_cep)"/><h6>{{cep_msg}}</h6></div></div><div class="row">   <div class="col-8"><h5>Rua</h5><input type="text" ng-model="user_rua"/></div><div class="col-4"><h5>Nº</h5><input type="text" ng-model="user_numero_casa"/></div></div><div class="row"><div class="col"><h5>Complemento</h5><input type="text" ng-model="user_complemento"/></div></div><div class="row"><div class="col"><h5>Telefone</h5><input type="text" ng-model="user_telefone"/></div></div></div></div><div id="retirada-dados" ng-show="entrega == \'balcao\'"><h5 class="titulo">Dados para Retirada</h5><div class="container"><div class="row"><div class="col"><h5>Nome</h5><input type="text" ng-model="user_name"/></div></div><div class="row"><div class="col"><h5>Telefone</h5><input type="text" ng-model="user_telefone"/></div></div></div></div>\x3c!-- escolha a massa--\x3e<div class="space-bottom"></div><a ui-sref="pagamento"><div class="fixed-button"><p>FORMA DE PAGAMENTO</p></div></a></section>'),$templateCache.put("pagamento/pagamento.html",'<section>  <div class="fixed-button-top"><div class="row align-vertical"><div class="col-2"><a ng-click="doTheBack()"><i class="fa fa-arrow-left"></i></a></div><div class="col-10 text-left">Pizza Gigante </div></div></div><div class="space-top"></div><h3 class="titulo">Entrega ou Retirada?</h3><row class="text-center"><div class="col">   <input class="hidden radio-label rb" type="radio" name="pagamento" id="pag_1" value="dinheiro" ng-model="pagamento" checked="checked"/><label class="button-label" for="pag_1"><h1>DINHEIRO</h1></label></div><div class="col">   <input class="hidden radio-label rb" type="radio" name="pagamento" id="pag_2" value="cartao" ng-model="pagamento"/><label class="button-label" for="pag_2"><h1>CARTÃO</h1></label></div></row><div id="pag-dinheiro" ng-show="pagamento == \'dinheiro\'"><h5 class="titulo">Precisa de troco?</h5><div class="row"><div class="col">   <input class="hidden radio-label rb" type="radio" name="troco" id="troco_1" value="sim" ng-model="troco" checked="checked"/><label class="button-label" for="troco_1"><h1>SIM</h1></label></div><div class="col">   <input class="hidden radio-label rb" type="radio" name="troco" id="troco_2" value="nao" ng-model="troco" checked="checked"/><label class="button-label" for="troco_2"><h1>Não</h1></label></div></div><div id="troco-dialog" ng-show="troco == \'sim\'"><h5 class="titulo">Troco Para Quantos Reais?</h5><div class="container"><div class="row"><div class="col"></div><div class="col text-right"><h3>R$</h3></div><div class="col"><input type="text" ng-mode="valor_troco"/></div><div class="col"></div></div></div></div></div><div id="pag-cartao" ng-show="pagamento == \'cartao\'"><h6 class="text-center">Você pagará na maquininha na entrega</h6><h5 class="titulo">Cartões Aceitos</h5><div class="container"><h5>Visa</h5><h5>Mastercard</h5><h5>Hipercard</h5><h5>Elo</h5><h5>Sodexo</h5></div></div>\x3c!-- escolha a massa--\x3e<div class="space-bottom"></div><a ui-sref="pagamento"><div class="fixed-button"><p>CONFIRMAR PEDIDO</p></div></a></section>'),$templateCache.put("Menu/Menu.html",'<section class="container marca"><button ng-click="pop()">Show a Toaster</button><article><h2 class="titulo">Promoções</h2><div class="row over-item" ng-repeat="combo in combos"><div class="col-3"><img ng-src="img/{{combo.imagem}}"/></div><div class="col-9"><h2 class="combo-titulo">{{combo.titulo}}</h2><p class="combo-descricao">{{combo.descricao}}</p><p class="combo-preco"> R${{combo.preco}}</p></div><hr/></div></article><article><h2 class="titulo"><i class="em em-pizza"></i>Pizzas</h2><a ui-sref="pizzaoptions" ng-repeat="pizza in pizzas" ng-click="addPizza(pizza)"><div class="row over-item"><div class="col"><h2 class="prato-titulo mt-3 mb-0">{{pizza.titulo}}</h2><p class="prato-descricao ml-1">{{pizza.descricao}}</p></div><div class="col text-right mt-3 mb-0"><p class="prato-preco">R${{pizza.preco}}</p></div></div><hr/></a></article><article><h2 class="titulo"><i class="em em-tropical_drink"></i>Bebidas</h2><div class="row over-item" ng-repeat="bebida in bebidas"><div class="col"><h2 class="prato-titulo mt-3">{{bebida.titulo}}</h2></div><div class="col text-right mt-3"><p class="prato-preco">R${{bebida.preco}}</p></div><hr/></div></article></section>'),$templateCache.put("pizza-sabores/sabores.html",'<section><div class="fixed-button-top"><div class="row align-vertical"><div class="col-2">\x3c!--botão de voltar--\x3e<a ng-click="doTheBack()"> <i class="fa fa-arrow-left"></i></a></div><div class="col-10 text-left">\x3c!-- item selecionado--\x3e{{currentPizza}}</div></div></div><div class="space-top"></div>\x3c!--seleção da quantidade de sabores--\x3e<h2 class="titulo" ng-if="nsabores.length&gt;1">Quantos Sabores?</h2><h2 class="titulo" ng-if="nsabores.length==1">Qual Sabor?</h2><div class="container" ng-if="nsabores.length&gt;1"><div class="button-wrap"><div class="row"><div class="col" ng-repeat="x in nsabores"><input class="hidden radio-label rb" type="radio" name="nsabores" id="n_{{x}}"/><label class="button-label" for="n_{{x}}" ng-click="setNSabores(x)"><h1>{{x}}</h1></label></div></div></div></div>\x3c!-- filtro de sabores (salgado, doce)--\x3e<div id="selecao-sabores" ng-show="issetNSabores || nsabores.length == 1"><h2 class="titulo" ng-if="nsabores.length&gt;1"> Escolha os sabores</h2><div class="row text-center"><div class="col"><input class="hidden radio-label rb" id="sd_1" type="radio" name="salgado_doce" value="salgado" ng-model="salgado_doce" ng-checked="true"/><label class="button-label" for="sd_1"><h1>Salgadas</h1></label></div><div class="col"><input class="hidden radio-label rb" id="sd_2" type="radio" name="salgado_doce" value="doce" ng-model="salgado_doce"/><label class="button-label" for="sd_2"><h1>Doces</h1></label></div></div></div>\x3c!-- lista de sabores   --\x3e<div class="container" id="sabores-salgados" ng-show="salgado_doce == \'salgado\'"><div ng-repeat="sabor in sabores_salgados"><input class="cb" type="checkbox" id="sb_{{sabor.id}}" ng-model="sabor.selected" ng-change="addSaborPizza(sabor.selected)" ng-disabled="nSaboresSelec == nSaboresLimit &amp;&amp; sabor.selected == false"/><label class="cb-label" for="sb_{{sabor.id}}" ng-click="addSabor(sabor)"><div class="row"><div class="col-2"></div><div class="col-10"><div class="row"><div class="col-9"><div class="sabor-pizza">{{sabor.sabor}}</div></div><div class="col-3"><div class="preco-pizza">{{sabor.preco}}</div></div></div><div class="row"><div class="descricao-pizza">{{sabor.descricao}}</div></div></div></div></label><hr/></div></div><div class="container" id="sabores-salgados" ng-show="salgado_doce == \'doce\'"><div ng-repeat="sabor in sabores_doces"><input class="cb" type="checkbox" id="sb_{{sabor.id}}" ng-model="sabor.selected" ng-change="addSaborPizza(sabor.selected)" ng-disabled="nSaboresSelec == nSaboresLimit &amp;&amp; sabor.selected == false"/><label class="cb-label" for="sb_{{sabor.id}}" ng-click="addSabor(sabor)"><div class="row"><div class="col-2"></div><div class="col-10"><div class="row"><div class="col-9"><div class="sabor-pizza">{{sabor.sabor}}</div></div><div class="col-3"><div class="preco-pizza">{{sabor.preco}}</div></div></div><div class="row"><div class="descricao-pizza">{{sabor.descricao}}</div></div></div></div></label><hr/></div></div>\x3c!-- escolha a massa--\x3e<div class="space-bottom"></div><a ui-sref="resumoPedido" ng-show="nSaboresSelec == nSaboresLimit"><div class="fixed-button"><p>PRÓXIMO</p></div></a></section>'),$templateCache.put("pizzaExtra/pizzaoptions.html",'<section>  <div class="fixed-button-top"><div class="row align-vertical"><div class="col-2"><a ng-click="doTheBack()"><i class="fa fa-arrow-left"></i></a></div><div class="col-10 text-left">{{currentPizza}}</div></div></div><div class="space-top"></div><div class="page-container"><div class="info-container"><h2 class="titulo"> Escolha a borda</h2><div class="container"></div><div class="button-wrap"><div ng-repeat="borda in bordas"><input class="hidden radio-label rb" type="radio" name="borda" id="b_{{borda.id}}"/><label class="button-label" for="b_{{borda.id}}" ng-click="setBorda(borda)"><div class="row"><div class="col-9 text-left"><h1>{{borda.nome}}</h1></div><div class="col-3 text-left"><h1 class="prato-preco"> {{borda.preco}}</h1></div></div></label></div></div></div><div class="info-container" ng-show="issetBorda"><h2 class="titulo"> Escolha a Massa</h2><div class="container"></div><div class="button-wrap"><div ng-repeat="massa in massas"><input class="hidden radio-label rb" type="radio" name="massa" id="m_{{massa.id}}"/><label class="button-label" for="m_{{massa.id}}" ng-click="setMassa(massa)"><div class="row"><div class="col-8 text-left"><h1>{{massa.nome}}</h1></div><div class="col-4 text-left"><h1 class="prato-preco">{{massa.preco}}</h1></div></div></label></div></div></div></div>\x3c!-- escolha a massa--\x3e<div class="space-bottom"></div><a ui-sref="pizza-sabores" ng-show="issetBorda &amp;&amp; issetMassa"><div class="fixed-button"><p>ESCOLHA OS SABORES</p></div></a></section>'),$templateCache.put("resumoPedido/resumoPedido.html",'<section>  <div class="fixed-button-top"><div class="row align-vertical"><div class="col-2"><a ng-click="doTheBack()"><i class="fa fa-arrow-left"></i></a></div><div class="col-10 text-left">Nome do Produto </div></div></div><div class="space-top"></div><h4 class="titulo">Resumo Do Seu Pedido</h4><div class="container"><div class="row card-pedido" ng-repeat="pizza in pedido.pizzas"><div class="col-3"></div><div class="col-9"><div class="row"><div class="col-9"><div class="title-resumo">{{pizza.nome}}</div></div><div class="col-3 text-left nopadding"><div class="title-preco">R${{pizza.preco}}</div></div></div><div class="row"><div class="col-9"><div class="desc-resumo">{{pizza.borda.nome}}</div></div><div class="col-3 text-left nopadding"><div class="resumo-preco" ng-if="pizza.borda.preco&gt;0">+R${{pizza.borda.preco}}</div></div></div><div class="row"><div class="col-9"><div class="desc-resumo">{{pizza.massa.nome}}</div></div><div class="col-3 text-left nopadding"><div class="resumo-preco" ng-if="pizza.massa.preco&gt;0">+R${{pizza.massa.preco}}</div></div></div><div ng-repeat="sabor in pizza.sabores"><div class="row"><div class="col-9"><div class="desc-resumo">{{sabor.nome}}</div></div><div class="col-3 nopadding"><div class="resumo-preco" ng-if="sabor.preco&gt;0">+R${{sabor.preco}}</div></div></div></div></div></div></div><a ui-sref="Menu"><button class="button-label"><p>CONTINUAR COMPRANDO</p></button></a><div class="space-bottom"></div><a ui-sref="entrega"><div class="fixed-button"><p>CONFIRMAR PEDIDO</p></div></a></section>')}]);